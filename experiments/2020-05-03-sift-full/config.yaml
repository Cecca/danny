---
environment:
  DANNY_THREADS: 8
  DANNY_HOSTS: "sss00:2001,sss01:2001,sss02:2001,sss03:2001,sss04:2001"
  DANNY_BASELINES_PATH: "/mnt/fast_storage/users/mcec/baselines.csv"
  DANNY_DATA_DIR: /mnt/fast_storage/users/mcec
  DANNY_SKETCH_EPSILON: 0.01
  DANNY_REPETITION_BATCH: 200000
  DANNY_RECALL: 0.8
experiments:

  # - name: SIFT fixed
  #   tags:
  #     - glove
  #     - cosine
  #   environment:
  #     DANNY_SEED:
  #       - 131245
  #   parameters:
  #     --algorithm: ["one-round-lsh"]
  #     --range: [0.5, 0.7,0.9]
  #     -k: [3,4,5,6,7,8,9,10,11,12,13,14,15]
  #     --sketch-bits: [0,64,128,256,512]
  #   arguments:
  #     - ["{{ dataset('SIFT-100nn-0.5-sample-200000') }}", "{{ dataset('SIFT-100nn-0.5-sample-200000') }}"]

#   - name: Hu et al SIFT (small k)
#     tags:
#       - glove
#       - cosine
#     environment:
#       DANNY_SEED:
#         - 131245
#     parameters:
#       --algorithm: ["hu-et-al"]
#       --range: [0.5, 0.7,0.9]
#       -k: [3,4,5,6,7,8,9,10]
#       --sketch-bits: [0,64,128,256,512]
#     arguments:
#       - ["{{ dataset('SIFT-100nn-0.5-sample-200000') }}", "{{ dataset('SIFT-100nn-0.5-sample-200000') }}"]

#   - name: SIFT Hu et al, large k
#     tags:
#       - glove
#       - cosine
#     environment:
#       DANNY_SEED:
#         - 131245
#     parameters:
#       --algorithm: ["hu-et-al"]
#       --range: [0.7,0.9]
#       -k: [11,12,13,14,15]
#       --sketch-bits: [0,64,128,256,512]
#     arguments:
#       - ["{{ dataset('SIFT-100nn-0.5-sample-200000') }}", "{{ dataset('SIFT-100nn-0.5-sample-200000') }}"]


{% for k in [3,4,5,6,7,8,9,10,11,12,13,14,15] %}
{% for addend in [0] %}
  - name: SIFT wto round
    tags:
      - glove
      - cosine
    environment:
      DANNY_SEED:
        - 131245
    parameters:
      --algorithm: ["two-round-lsh"]
      --range: [0.5,0.7,0.9]
      -k: "{{ k }}"
      -l: "{{ k + addend }}"
      --sketch-bits: [0,64,128,256,512]
    arguments:
      - ["{{ dataset('SIFT-100nn-0.5-sample-200000') }}", "{{ dataset('SIFT-100nn-0.5-sample-200000') }}"]

# {% endfor %}
# {% endfor %}




